```markdown
## 📌 Giới thiệu
WebSocket cung cấp kết nối hai chiều (bidirectional) giữa client và server, cho phép truyền dữ liệu real-time mà không cần polling. Hoàn hảo cho chat apps, live notifications, multiplayer games, và trading platforms.

## 🎯 Mục tiêu học
- Hiểu sự khác biệt giữa WebSocket và HTTP
- Tạo WebSocket client trong trình duyệt
- Xây dựng WebSocket server với Node.js
- Implement reconnect logic và heartbeat

## 🔧 Hướng dẫn thực hiện

### Bước 1: Node.js WebSocket Server (ws)

```javascript
// server.js
const WebSocket = require('ws');
const wss = new WebSocket.Server({ port: 8080 });

wss.on('connection', (ws) => {
  console.log('Client connected');
  ws.send(JSON.stringify({ type: 'welcome', msg: 'Welcome!' }));

  ws.on('message', (msg) => {
    // broadcast to all
    wss.clients.forEach(client => {
      if (client.readyState === WebSocket.OPEN) client.send(msg);
    });
  });
});
```

### Bước 2: Browser client (reconnect + heartbeat)

```javascript
function createWs(url) {
  let ws;
  let retry = 1000;

  function connect() {
    ws = new WebSocket(url);
    ws.onopen = () => { console.log('WS open'); retry = 1000; startHeartbeat(); };
    ws.onmessage = (e) => console.log('Msg', e.data);
    ws.onclose = () => { console.log('Closed, reconnecting...'); setTimeout(connect, retry); retry = Math.min(30000, retry * 2); };
    ws.onerror = (e) => console.error('WS error', e);
  }

  let hb;
  function startHeartbeat() {
    hb = setInterval(() => {
      if (ws.readyState === WebSocket.OPEN) ws.send(JSON.stringify({ type: 'ping' }));
    }, 20000);
  }

  connect();
  return {
    send: (data) => ws.readyState === WebSocket.OPEN && ws.send(JSON.stringify(data)),
    close: () => { clearInterval(hb); ws.close(); }
  };
}
```

### Bước 3: Integrate into React

Use a hook to manage connection state and messages, then render messages in a simple chat UI.

## 🧪 Bài tập
1. Xây dựng chat app đơn giản: gửi/nhận tin nhắn, danh sách online users.
2. Thêm authentication token khi kết nối và xử lý quyền gửi tin.

## 🎓 Kết luận
WebSocket rất phù hợp cho realtime use-cases. Hãy luôn xử lý reconnect, heartbeat và authorization. Với quy mô lớn, cân nhắc dùng MQTT, Socket.io, hoặc giải pháp managed (Pusher, Ably) tùy yêu cầu độ tin cậy và latency.
```
## 📌 Giới thiệu
WebSocket cung cấp kết nối hai chiều (bidirectional) giữa client và server, cho phép truyền dữ liệu real-time mà không cần polling. Hoàn hảo cho chat apps, live notifications, multiplayer games, và trading platforms.

## 🎯 Mục tiêu học
- Hiểu sự khác biệt giữa WebSocket và HTTP
- Tạo WebSocket client trong trình duyệt
- Xây dựng WebSocket server với Node.js
- Implement reconnect logic và heartbeat

## 🔧 Hướng dẫn thực hiện

### Bước 1: Tạo WebSocket Server (Node.js)

\