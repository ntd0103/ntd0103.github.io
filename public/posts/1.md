## ğŸ“Œ Giá»›i thiá»‡u
Socket lÃ  ná»n táº£ng cá»§a láº­p trÃ¬nh máº¡ng trong Java. NÃ³ cung cáº¥p cÆ¡ cháº¿ giao tiáº¿p hai chiá»u giá»¯a client vÃ  server thÃ´ng qua TCP/IP. Trong bÃ i nÃ y, mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n xÃ¢y dá»±ng má»™t há»‡ thá»‘ng Echo Ä‘Æ¡n giáº£n Ä‘á»ƒ hiá»ƒu rÃµ cÃ¡ch Socket hoáº¡t Ä‘á»™ng.

## ğŸ¯ Má»¥c tiÃªu há»c
- Hiá»ƒu khÃ¡i niá»‡m Socket vÃ  ServerSocket trong Java
- Táº¡o server láº¯ng nghe káº¿t ná»‘i trÃªn má»™t cá»•ng cá»¥ thá»ƒ
- XÃ¢y dá»±ng client káº¿t ná»‘i vÃ  trao Ä‘á»•i dá»¯ liá»‡u vá»›i server
- Xá»­ lÃ½ luá»“ng dá»¯ liá»‡u vÃ o/ra (InputStream/OutputStream)

## ğŸ”§ HÆ°á»›ng dáº«n thá»±c hiá»‡n

### BÆ°á»›c 1: Táº¡o Server
Server sáº½ láº¯ng nghe trÃªn cá»•ng 5000 vÃ  chá» káº¿t ná»‘i tá»« client:

DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ server Ä‘Æ¡n giáº£n (blocking I/O) Ä‘á»ƒ minh há»a cÃ¡c bÆ°á»›c cÆ¡ báº£n.

```java
import java.net.*;
import java.io.*;

public class EchoServer {
	public static void main(String[] args) {
		try (ServerSocket server = new ServerSocket(5000)) {
			System.out.println("Server Ä‘ang chá» káº¿t ná»‘i...");

			while (true) {
				Socket client = server.accept();
				System.out.println("Client Ä‘Ã£ káº¿t ná»‘i: " + client.getInetAddress());

				// Xá»­ lÃ½ client trong má»™t thread Ä‘Æ¡n giáº£n
				new Thread(() -> {
					try (
						BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
						PrintWriter out = new PrintWriter(client.getOutputStream(), true)
					) {
						String line;
						while ((line = in.readLine()) != null) {
							System.out.println("Server nháº­n: " + line);
							out.println("Echo: " + line);
						}
					} catch (IOException e) {
						e.printStackTrace();
					} finally {
						try { client.close(); } catch (IOException ignored) {}
					}
				}).start();
			}

		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
```

### BÆ°á»›c 2: Táº¡o Client (vÃ­ dá»¥)

```java
import java.net.*;
import java.io.*;

public class SimpleClient {
	public static void main(String[] args) throws Exception {
		try (Socket socket = new Socket("localhost", 5000);
				 BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
				 PrintWriter out = new PrintWriter(socket.getOutputStream(), true)) {

			out.println("Hello Server");
			System.out.println("Pháº£n há»“i tá»« server: " + in.readLine());
		}
	}
}
```

### BÆ°á»›c 3: CÃ¡c lÆ°u Ã½ production

- Sá»­ dá»¥ng thread pool (ExecutorService) Ä‘á»ƒ trÃ¡nh táº¡o quÃ¡ nhiá»u thread.
- Thiáº¿t láº­p timeout cho socket: `socket.setSoTimeout(â€¦)`.
- Xá»­ lÃ½ exception rÃµ rÃ ng vÃ  log thÃ´ng tin client (id/ip) Ä‘á»ƒ dá»… gá»¡ lá»—i.
- Vá»›i hiá»‡u nÄƒng cao, cÃ¢n nháº¯c NIO (Non-blocking I/O) hoáº·c Netty.

### VÃ­ dá»¥ nÃ¢ng cao: Thread pool

```java
ExecutorService pool = Executors.newFixedThreadPool(20);
// á»Ÿ chá»— accept(): pool.submit(() -> handleClient(client));
```

## ğŸ§ª BÃ i táº­p thá»±c hÃ nh
1. Má»Ÿ rá»™ng server Ä‘á»ƒ nháº­n nhiá»u client Ä‘á»“ng thá»i vÃ  giá»¯ log cÃ¡c message vÃ o file.
2. ThÃªm tÃ­nh nÄƒng broadcast: khi client A gá»­i, server gá»­i tá»›i táº¥t cáº£ client khÃ¡c.
3. Implement reconnection/backoff cho client khi server offline.

## ğŸ“ Káº¿t luáº­n
Trong bÃ i nÃ y báº¡n Ä‘Ã£ náº¯m Ä‘Æ°á»£c:
- CÃ¡ch táº¡o ServerSocket vÃ  Socket client cÆ¡ báº£n.
- LÆ°u Ã½ vá» concurrency, thread pool vÃ  timeout.
- Khi nÃ o nÃªn dÃ¹ng NIO/Netty cho production.

Tiáº¿p theo: thá»­ triá»ƒn khai phiÃªn báº£n non-blocking báº±ng Java NIO hoáº·c dÃ¹ng Netty Ä‘á»ƒ so sÃ¡nh hiá»‡u nÄƒng.
\